{"remainingRequest":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[[\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/react-hot-loader/babel.js\"],\"env\":{\"development\":{\"presets\":[\"@babel/env\",\"@babel/preset-react\"],\"plugins\":[[\"react-hot-loader/babel\"],\"@babel/plugin-proposal-class-properties\"]},\"production\":{\"presets\":[\"@babel/preset-env\",\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-proposal-class-properties\"]}},\"babelrc\":false,\"cacheDirectory\":true,\"cacheCompression\":false,\"compact\":false}!/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/search.js","dependencies":[{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/search.js","mtime":1543390634435},{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/cache-loader/dist/cjs.js","mtime":1541998094606},{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-loader/lib/index.js","mtime":1541048071011}],"contextDependencies":[],"result":["var _jsxFileName = \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/search.js\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport Mousetrap from 'mousetrap';\nimport PropTypes from 'prop-types';\nimport { Icon } from 'ukelli-ui';\nimport { Call } from 'basic-helper';\nimport { Link } from '../router-multiple';\nvar ESC_KEY = 27;\n\nvar SearchBox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchBox, _Component);\n\n  function SearchBox(props) {\n    var _this;\n\n    _classCallCheck(this, SearchBox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchBox).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleEsc\", function (e) {\n      if (e.keyCode === ESC_KEY) {\n        _this._input.blur();\n\n        if (_this.shouldBeHidden) {\n          _this.shouldBeHidden = false;\n\n          _this.props.onToggleNav(false);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"show\", function () {\n      _this._input.focus();\n    });\n\n    _this.state = {\n      searchMap: '',\n      isShow: false\n    };\n    return _this;\n  }\n\n  _createClass(SearchBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Mousetrap.bind(['alt+s'], function (e) {\n        _this2._input.focus();\n\n        if (!_this2.props.showLeftMenu) {\n          _this2.shouldBeHidden = true;\n\n          _this2.props.onToggleNav(true);\n        }\n\n        return false;\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Mousetrap.unbind(['alt+s']);\n    }\n  }, {\n    key: \"searchMenu\",\n    value: function searchMenu(val) {\n      this.setState({\n        searchMap: val\n      });\n    }\n  }, {\n    key: \"setSearchCon\",\n    value: function setSearchCon(isShow) {\n      this.setState({\n        isShow: isShow\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          searchMap = _this$state.searchMap,\n          isShow = _this$state.isShow;\n      var _this$props = this.props,\n          codeMapper = _this$props.codeMapper,\n          onChangeMenu = _this$props.onChangeMenu;\n      var allCode = Object.keys(codeMapper) || [];\n      return React.createElement(\"div\", {\n        className: 'search-container' + (isShow ? ' show-content' : ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        ref: function ref(c) {\n          return _this3._input = c;\n        },\n        type: \"text\",\n        placeholder: \"\\u641C\\u7D22\\u83DC\\u5355\\uFF0C\\u9996\\u5B57\\u6BCD\\u7EC4\\u5408\\u66F4\\u5FEB\\u54E6\",\n        className: \"form-control input-sm\",\n        onChange: function onChange(e) {\n          return _this3.searchMenu(e.target.value);\n        },\n        onFocus: function onFocus(e) {\n          return _this3.setSearchCon(true);\n        },\n        onBlur: function onBlur(e) {\n          setTimeout(function () {\n            _this3.setSearchCon(false);\n\n            _this3.shouldBeHidden = false;\n          }, 100);\n        },\n        onKeyUp: this.handleEsc,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"hide-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, allCode.filter(function (code) {\n        var item = codeMapper[code] || '';\n        return item.indexOf(searchMap) != -1 || code.indexOf(searchMap.toUpperCase()) != -1;\n      }).map(function (code, idx) {\n        return React.createElement(Link, {\n          className: \"result-item\",\n          key: idx,\n          to: code,\n          onClick: function onClick(e) {\n            return Call(onChangeMenu, code);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, codeMapper[code]);\n      })));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return SearchBox;\n}(Component);\n\n_defineProperty(SearchBox, \"propTypes\", {\n  onChangeMenu: PropTypes.func,\n  onToggleNav: PropTypes.func,\n  showLeftMenu: PropTypes.bool,\n  codeMapper: PropTypes.object\n});\n\nexport { SearchBox as default };\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ESC_KEY, \"ESC_KEY\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/search.js\");\n  reactHotLoader.register(SearchBox, \"SearchBox\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/search.js\");\n  leaveModule(module);\n})();\n\n;\nSearchBox.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"searchMenu\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"val\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"setSearchCon\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"isShow\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"handleEsc\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"e\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"show\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }],\n  \"displayName\": \"SearchBox\",\n  \"props\": {\n    \"onChangeMenu\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"onToggleNav\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"showLeftMenu\": {\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"codeMapper\": {\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/search.js"],"names":["React","Component","Mousetrap","PropTypes","Icon","Call","Link","ESC_KEY","SearchBox","props","e","keyCode","_input","blur","shouldBeHidden","onToggleNav","focus","state","searchMap","isShow","bind","showLeftMenu","unbind","val","setState","codeMapper","onChangeMenu","allCode","Object","keys","c","searchMenu","target","value","setSearchCon","setTimeout","handleEsc","filter","code","item","indexOf","toUpperCase","map","idx","func","bool","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Mousetrap from 'mousetrap';\nimport PropTypes from 'prop-types';\nimport { Icon } from 'ukelli-ui';\nimport { Call } from 'basic-helper';\n\nimport { Link } from '../router-multiple';\n\nconst ESC_KEY = 27;\n\nexport default class SearchBox extends Component {\n  static propTypes = {\n    onChangeMenu: PropTypes.func,\n    onToggleNav: PropTypes.func,\n    showLeftMenu: PropTypes.bool,\n    codeMapper: PropTypes.object,\n  };\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      searchMap: '',\n      isShow: false,\n    };\n  }\n\n  componentDidMount() {\n    Mousetrap.bind(['alt+s'], e => {\n      this._input.focus();\n      if (!this.props.showLeftMenu) {\n        this.shouldBeHidden = true;\n        this.props.onToggleNav(true);\n      }\n      return false;\n    });\n  }\n\n  componentWillUnmount() {\n    Mousetrap.unbind(['alt+s']);\n  }\n\n  searchMenu(val) {\n    this.setState({\n      searchMap: val\n    });\n  }\n  setSearchCon(isShow) {\n    this.setState({\n      isShow,\n    });\n  }\n\n  handleEsc = e => {\n    if (e.keyCode === ESC_KEY) {\n      this._input.blur();\n      if (this.shouldBeHidden) {\n        this.shouldBeHidden = false;\n        this.props.onToggleNav(false);\n      }\n    }\n  };\n  show = () => {\n    this._input.focus();\n  }\n  render() {\n    const { searchMap, isShow } = this.state;\n    const { codeMapper, onChangeMenu } = this.props;\n    const allCode = Object.keys(codeMapper) || [];\n    return (\n      <div \n        className={'search-container' + (isShow ? ' show-content' : '')}>\n        <input\n          ref={c => (this._input = c)}\n          type=\"text\"\n          placeholder=\"搜索菜单，首字母组合更快哦\"\n          className=\"form-control input-sm\"\n          onChange={e => this.searchMenu(e.target.value)}\n          onFocus={e => this.setSearchCon(true)}\n          onBlur={e => {\n            setTimeout(() => {\n              this.setSearchCon(false);\n              this.shouldBeHidden = false;\n            }, 100);\n          }}\n          onKeyUp={this.handleEsc}/>\n        <div className=\"hide-content\">\n          {\n            allCode\n              .filter(\n                code => {\n                  let item = codeMapper[code] || '';\n                  return item.indexOf(searchMap) != -1 || code.indexOf(searchMap.toUpperCase()) != -1;\n                }\n              )\n              .map((code, idx) => {\n                return (\n                  <Link\n                    className=\"result-item\"\n                    key={idx}\n                    to={code}\n                    onClick={e => Call(onChangeMenu, code)}>\n                    {codeMapper[code]}\n                  </Link>\n                );\n              })\n          }\n        </div>\n      </div>\n    );\n  }\n}\n"]}]}