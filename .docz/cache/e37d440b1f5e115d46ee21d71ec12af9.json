{"remainingRequest":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[[\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/react-hot-loader/babel.js\"],\"env\":{\"development\":{\"presets\":[\"@babel/env\",\"@babel/preset-react\"],\"plugins\":[[\"react-hot-loader/babel\"],\"@babel/plugin-proposal-class-properties\"]},\"production\":{\"presets\":[\"@babel/preset-env\",\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-proposal-class-properties\"]}},\"babelrc\":false,\"cacheDirectory\":true,\"cacheCompression\":false,\"compact\":false}!/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js","dependencies":[{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js","mtime":1543390634435},{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/cache-loader/dist/cjs.js","mtime":1541998094606},{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-loader/lib/index.js","mtime":1541048071011}],"contextDependencies":[],"result":["var _jsxFileName = \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport createBrowserHistory from \"history/createBrowserHistory\";\nimport { getUrlParams } from 'uke-request';\nimport { RemoveArrayItem } from 'basic-helper';\nvar history = createBrowserHistory();\nvar cacheState = {\n  routers: [],\n  routerInfo: {},\n  activeRouteIdx: -1,\n  activeRoute: ''\n};\n\nvar pushToHistory = function pushToHistory(url, params) {\n  history.push(url.replace(/\\/\\//g, '/'), params);\n};\n\nvar wrapPushUrl = function wrapPushUrl(pushConfig) {\n  var component = pushConfig.component,\n      params = pushConfig.params;\n  var paramsObj = typeof params == 'string' ? {\n    id: params\n  } : _objectSpread({}, params);\n  var paramsStr = '';\n\n  var _paramsObj$id = paramsObj.id,\n      id = _paramsObj$id === void 0 ? '' : _paramsObj$id,\n      other = _objectWithoutProperties(paramsObj, [\"id\"]);\n\n  var otherParams = _objectSpread({}, other);\n\n  for (var key in otherParams) {\n    var val = otherParams[key];\n    paramsStr += \"\".concat(key, \"=\").concat(val, \"&&\");\n  }\n\n  var result = \"/\".concat(component, \"/\").concat(id).concat(paramsStr ? '?' + paramsStr : ''); // let result = `/${component}/${id}${paramsStr ? ('?' + paramsStr) : ''}`;\n\n  result = result.replace(/&&$/g, '');\n  return result;\n};\n\nvar onNavigate = function onNavigate(config) {\n  if (!config) return console.log('Not config');\n  var location = history.location;\n  config[\"from\"] = location;\n\n  switch (config.type) {\n    case \"PUSH\":\n      var pushUrl = wrapPushUrl(config);\n      pushToHistory(\"#/\".concat(pushUrl), config);\n      break;\n\n    case \"LINK\":\n      break;\n    // case \"MODAL\":\n    //   ShowGlobalModal({\n    //     ...config,\n    //     showFuncBtn: false\n    //   })\n    //   break;\n\n    case \"GO_BACK\":\n      history.goBack();\n      break;\n  }\n};\n\nvar resolvePath = function resolvePath(path) {\n  var result = path.split('?')[0].replace(/#/g, '');\n  var pathArr = result.split('/').filter(function (item) {\n    return !!item;\n  });\n  return pathArr;\n};\n\nvar RouterHelper =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RouterHelper, _Component);\n\n  function RouterHelper(props) {\n    var _this;\n\n    _classCallCheck(this, RouterHelper);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RouterHelper).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"history\", history);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"wrapPushUrl\", wrapPushUrl);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"pushToHistory\", pushToHistory);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onNavigate\", onNavigate);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", cacheState);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"changeRoute\", function (component, params) {\n      onNavigate({\n        type: 'PUSH',\n        component: component,\n        params: params\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleHistory\", function (location, action) {\n      var hash = location.hash,\n          _location$state = location.state,\n          state = _location$state === void 0 ? {} : _location$state;\n      var activeRoute = resolvePath(hash)[0];\n      var nextRouterState = state.nextRouters;\n\n      _this.selectTab(activeRoute, nextRouterState);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"closeTab\", function (idx, routeInfo) {\n      var _this$state = _this.state,\n          routers = _this$state.routers,\n          routerInfo = _this$state.routerInfo,\n          activeRouteIdx = _this$state.activeRouteIdx;\n      var targetRoute = routers[idx];\n      var nextRouters = RemoveArrayItem(routers, targetRoute);\n\n      var nextRouterInfo = _objectSpread({}, routerInfo);\n\n      delete nextRouterInfo[targetRoute];\n      var nextRoutersLen = nextRouters.length - 1;\n      var nextActiveIdx = activeRouteIdx > nextRoutersLen ? nextRoutersLen : activeRouteIdx;\n      var nextActiveRoute = nextRouters[nextActiveIdx] || '/';\n      var nextState = {\n        routers: nextRouters,\n        routerInfo: nextRouterInfo,\n        activeRoute: nextActiveRoute,\n        activeRouteIdx: nextActiveIdx\n      };\n      pushToHistory(\"#/\".concat(nextActiveRoute), {\n        type: 'CLOSE',\n        component: nextActiveRoute,\n        params: nextRouterInfo,\n        nextRouters: nextState\n      });\n      return nextState;\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"selectTab\", function (activeRoute, nextRouterState) {\n      if (nextRouterState) return _this.setState(nextRouterState);\n      if (!activeRoute) return;\n\n      _this.setState(function (_ref) {\n        var routers = _ref.routers,\n            routerInfo = _ref.routerInfo;\n        var currComIdx = routers.indexOf(activeRoute);\n\n        var nextRouterInfo = _objectSpread({}, routerInfo);\n\n        nextRouterInfo[activeRoute] = _objectSpread({}, nextRouterInfo[activeRoute] || {}, {\n          params: getUrlParams()\n        });\n\n        var nextRouters = _toConsumableArray(routers);\n\n        var activeIdx = currComIdx;\n\n        if (currComIdx == -1) {\n          nextRouters = _toConsumableArray(routers).concat([activeRoute]);\n          activeIdx = nextRouters.length - 1;\n        }\n\n        var nextState = {\n          routers: nextRouters,\n          activeRoute: activeRoute,\n          activeRouteIdx: activeIdx,\n          routerInfo: nextRouterInfo\n        };\n        cacheState = nextState;\n        return nextState;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"initRoute\", function () {\n      var initRoute = resolvePath(location.hash)[0];\n      initRoute && _this.selectTab(initRoute);\n    });\n\n    history.listen(_this.handleHistory);\n    return _this;\n  }\n\n  _createClass(RouterHelper, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initRoute();\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return RouterHelper;\n}(Component);\n/**\n * 用于导航到另外页面的组件\n * @param {object} options 参数\n * @TODO: 完善是否激活的判定\n */\n\n\nvar Link = function Link(_ref2) {\n  var to = _ref2.to,\n      _ref2$className = _ref2.className,\n      className = _ref2$className === void 0 ? 'link-btn' : _ref2$className,\n      children = _ref2.children,\n      params = _ref2.params;\n  var location = history.location;\n  var hash = location.hash;\n  var isActive = hash != '/' && hash.split('/')[1] === to;\n  return React.createElement(\"span\", {\n    className: className + (isActive ? ' active' : ''),\n    onClick: function onClick(e) {\n      return onNavigate({\n        type: 'PUSH',\n        component: to,\n        params: params\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, children);\n};\n\nLink.defaultProps = {\n  className: 'link-btn',\n  params: {}\n};\nLink.propTypes = {\n  to: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  params: PropTypes.shape({\n    type: PropTypes.string\n  })\n};\nexport { RouterHelper, Link, history, wrapPushUrl, pushToHistory, onNavigate };\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(history, \"history\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\");\n  reactHotLoader.register(cacheState, \"cacheState\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\");\n  reactHotLoader.register(pushToHistory, \"pushToHistory\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\");\n  reactHotLoader.register(wrapPushUrl, \"wrapPushUrl\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\");\n  reactHotLoader.register(onNavigate, \"onNavigate\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\");\n  reactHotLoader.register(resolvePath, \"resolvePath\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\");\n  reactHotLoader.register(RouterHelper, \"RouterHelper\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\");\n  reactHotLoader.register(Link, \"Link\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js\");\n  leaveModule(module);\n})();\n\n;\nLink.__docgenInfo = {\n  \"description\": \"\\u7528\\u4E8E\\u5BFC\\u822A\\u5230\\u53E6\\u5916\\u9875\\u9762\\u7684\\u7EC4\\u4EF6\\n@param {object} options \\u53C2\\u6570\\n@TODO: \\u5B8C\\u5584\\u662F\\u5426\\u6FC0\\u6D3B\\u7684\\u5224\\u5B9A\",\n  \"methods\": [],\n  \"displayName\": \"Link\",\n  \"props\": {\n    \"className\": {\n      \"defaultValue\": {\n        \"value\": \"'link-btn'\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"params\": {\n      \"defaultValue\": {\n        \"value\": \"{}\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"shape\",\n        \"value\": {\n          \"type\": {\n            \"name\": \"string\",\n            \"required\": false\n          }\n        }\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"to\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/router-multiple.js"],"names":["React","Component","PropTypes","createBrowserHistory","getUrlParams","RemoveArrayItem","history","cacheState","routers","routerInfo","activeRouteIdx","activeRoute","pushToHistory","url","params","push","replace","wrapPushUrl","pushConfig","component","paramsObj","id","paramsStr","other","otherParams","key","val","result","onNavigate","config","console","log","location","type","pushUrl","goBack","resolvePath","path","split","pathArr","filter","item","RouterHelper","props","action","hash","state","nextRouterState","nextRouters","selectTab","idx","routeInfo","targetRoute","nextRouterInfo","nextRoutersLen","length","nextActiveIdx","nextActiveRoute","nextState","setState","currComIdx","indexOf","activeIdx","initRoute","listen","handleHistory","Link","to","className","children","isActive","e","defaultProps","propTypes","string","isRequired","shape"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport createBrowserHistory from \"history/createBrowserHistory\";\nimport { getUrlParams } from 'uke-request';\nimport { RemoveArrayItem } from 'basic-helper';\n\nconst history = createBrowserHistory();\n\nlet cacheState = {\n  routers: [],\n  routerInfo: {},\n  activeRouteIdx: -1,\n  activeRoute: '',\n};\n\nconst pushToHistory = (url, params) => {\n  history.push(url.replace(/\\/\\//g, '/'), params);\n};\n\nconst wrapPushUrl = (pushConfig) => {\n  const {component, params} = pushConfig;\n  let paramsObj = typeof params == 'string' ? {id: params} : {...params};\n  let paramsStr = '';\n  let {id = '', ...other} = paramsObj;\n  let otherParams = {...other};\n  for (const key in otherParams) {\n    const val = otherParams[key];\n    paramsStr += `${key}=${val}&&`;\n  }\n  let result = `/${component}/${id}${paramsStr ? ('?' + paramsStr) : ''}`;\n  // let result = `/${component}/${id}${paramsStr ? ('?' + paramsStr) : ''}`;\n  result = result.replace(/&&$/g, '');\n  return result;\n};\n\nconst onNavigate = config => {\n  if(!config) return console.log('Not config');\n  const { location } = history;\n  config[\"from\"] = location;\n  switch (config.type) {\n  case \"PUSH\":\n    var pushUrl = wrapPushUrl(config);\n    pushToHistory(`#/${pushUrl}`, config);\n    break;\n  case \"LINK\":\n    break;\n    // case \"MODAL\":\n    //   ShowGlobalModal({\n    //     ...config,\n    //     showFuncBtn: false\n    //   })\n    //   break;\n  case \"GO_BACK\":\n    history.goBack();\n    break;\n  }\n};\n\nconst resolvePath = (path) => {\n  let result = path.split('?')[0].replace(/#/g, '');\n  let pathArr = result.split('/').filter(item => !!item);\n  return pathArr;\n};\n\nclass RouterHelper extends Component {\n  history = history;\n  wrapPushUrl = wrapPushUrl;\n  pushToHistory = pushToHistory;\n  onNavigate = onNavigate;\n  state = cacheState;\n  constructor(props) {\n    super(props);\n\n    history.listen(this.handleHistory);\n  }\n  changeRoute = (component, params) => {\n    onNavigate({\n      type: 'PUSH',\n      component,\n      params\n    });\n  };\n  handleHistory = (location, action) => {\n    const { hash, state = {} } = location;\n    const activeRoute = resolvePath(hash)[0];\n    const nextRouterState = state.nextRouters;\n    this.selectTab(activeRoute, nextRouterState);\n  };\n  closeTab = (idx, routeInfo) => {\n    const { routers, routerInfo, activeRouteIdx } = this.state;\n\n    let targetRoute = routers[idx];\n    let nextRouters = RemoveArrayItem(routers, targetRoute);\n    let nextRouterInfo = {...routerInfo};\n    delete nextRouterInfo[targetRoute];\n    let nextRoutersLen = nextRouters.length - 1;\n    let nextActiveIdx = activeRouteIdx > nextRoutersLen ? nextRoutersLen : activeRouteIdx;\n    let nextActiveRoute = nextRouters[nextActiveIdx] || '/';\n\n    const nextState = {\n      routers: nextRouters,\n      routerInfo: nextRouterInfo,\n      activeRoute: nextActiveRoute,\n      activeRouteIdx: nextActiveIdx,\n    };\n\n    pushToHistory(`#/${nextActiveRoute}`, {\n      type: 'CLOSE',\n      component: nextActiveRoute,\n      params: nextRouterInfo,\n      nextRouters: nextState\n    });\n    \n    return nextState;\n  }\n  selectTab = (activeRoute, nextRouterState) => {\n    if(nextRouterState) return this.setState(nextRouterState);\n    if(!activeRoute) return;\n\n    this.setState(({ routers, routerInfo }) => {\n      let currComIdx = routers.indexOf(activeRoute);\n      let nextRouterInfo = {...routerInfo};\n      nextRouterInfo[activeRoute] = {\n        ...(nextRouterInfo[activeRoute] || {}),\n        params: getUrlParams()\n      };\n      let nextRouters = [...routers];\n      let activeIdx = currComIdx;\n      if(currComIdx == -1) {\n        nextRouters = [...routers, activeRoute];\n        activeIdx = nextRouters.length - 1;\n      }\n      let nextState = {\n        routers: nextRouters,\n        activeRoute: activeRoute,\n        activeRouteIdx: activeIdx,\n        routerInfo: nextRouterInfo\n      };\n      cacheState = nextState;\n      return nextState;\n    });\n  }\n  initRoute = () => {\n    let initRoute = resolvePath(location.hash)[0];\n    initRoute && this.selectTab(initRoute);\n  }\n  componentDidMount() {\n    this.initRoute();\n  }\n}\n\n/**\n * 用于导航到另外页面的组件\n * @param {object} options 参数\n * @TODO: 完善是否激活的判定\n */\nconst Link = ({ to, className = 'link-btn', children, params }) => {\n  const { location } = history;\n  const { hash } = location;\n  const isActive = hash != '/' && hash.split('/')[1] === to;\n\n  return (\n    <span \n      className={className + (isActive ? ' active' : '')}\n      onClick={e => onNavigate({\n        type: 'PUSH',\n        component: to,\n        params\n      })}>\n      {children}\n    </span>\n  );\n};\nLink.defaultProps = {\n  className: 'link-btn',\n  params: {}\n};\nLink.propTypes = {\n  to: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  params: PropTypes.shape({\n    type: PropTypes.string,\n  }),\n};\n\nexport {\n  RouterHelper,\n  Link,\n  history,\n  wrapPushUrl,\n  pushToHistory,\n  onNavigate,\n};"]}]}