{"remainingRequest":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[[\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/react-hot-loader/babel.js\"],\"env\":{\"development\":{\"presets\":[\"@babel/env\",\"@babel/preset-react\"],\"plugins\":[[\"react-hot-loader/babel\"],\"@babel/plugin-proposal-class-properties\"]},\"production\":{\"presets\":[\"@babel/preset-env\",\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-proposal-class-properties\"]}},\"babelrc\":false,\"cacheDirectory\":true,\"cacheCompression\":false,\"compact\":false}!/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/layout.js","dependencies":[{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/layout.js","mtime":1543404186772},{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/cache-loader/dist/cjs.js","mtime":1541998094606},{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-loader/lib/index.js","mtime":1541048071011}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/layout.js\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * 主要布局文件, 不需要单独修改, 以后统一修改\n */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { ShowGlobalModal, Icon, Tabs, Tab, DropdownMenu, ToolTip, Loading, setUkelliConfig, setUkeLang } from 'ukelli-ui';\nimport Mousetrap from 'mousetrap';\nimport { ToggleBasicFloatLen, EventEmitter } from 'basic-helper';\nimport ShortcutHelp from './shortcut';\nimport LeftmenuLayout from './leftmenu'; // import Posts from './posts';\n\nimport Notfound from './notfound';\nimport { RouterHelper } from './router-multiple';\nimport DashBoardWrapper from './dash-board';\nvar i18nMapperUrl = './i18n/';\n\nvar ScaffoldLayout =\n/*#__PURE__*/\nfunction (_RouterHelper) {\n  _inherits(ScaffoldLayout, _RouterHelper);\n\n  function ScaffoldLayout(props) {\n    var _this;\n\n    _classCallCheck(this, ScaffoldLayout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ScaffoldLayout).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", _objectSpread({}, _this.state, {\n      menuCodeMapper: {},\n      showLeftMenu: true,\n      activeMenu: '',\n      displayFloat: true,\n      menuData: _this.props.menuStore || [],\n      lang: navigator.language,\n      ready: false,\n      langMapper: {}\n    }));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"changeLang\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(lang) {\n        var langMapper;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (lang) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.next = 4;\n                return _this.fetchLangMapper(lang);\n\n              case 4:\n                langMapper = _context.sent;\n\n                _this.setState({\n                  lang: lang,\n                  langMapper: langMapper\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"fetchLangMapper\",\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(lang) {\n        var url, mapper;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                url = _this.geti18nUrl(lang);\n                _context2.prev = 1;\n                _context2.next = 4;\n                return fetch(url);\n\n              case 4:\n                _context2.next = 6;\n                return _context2.sent.json();\n\n              case 6:\n                mapper = _context2.sent;\n                setUkelliConfig({\n                  getKeyMap: _this.gm\n                });\n                setUkeLang(lang);\n                return _context2.abrupt(\"return\", mapper);\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log('please set the correct i18n url');\n                return _context2.abrupt(\"return\", {});\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 12]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"gm\", function (key) {\n      var keyMapper = _this.state.langMapper;\n      return key === 'all' ? keyMapper : keyMapper[key] || key || '';\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleCloseFormShortcut\", function () {\n      var _this$state = _this.state,\n          activeRouteIdx = _this$state.activeRouteIdx,\n          routerInfo = _this$state.routerInfo;\n\n      _this.closeTab(activeRouteIdx, routerInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"toggleFloat\", function () {\n      var isDisplay = ToggleBasicFloatLen();\n\n      _this.setState(function (_ref3) {\n        var displayFloat = _ref3.displayFloat;\n        return {\n          displayFloat: !displayFloat\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onGetMenuCodeMapper\", function (menuCodeMapper) {\n      _this.setState({\n        menuCodeMapper: menuCodeMapper\n      });\n\n      window.MenuCodeMapper = menuCodeMapper;\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"toggleLeftMenu\", function (showLeftMenu) {\n      _this.setState({\n        showLeftMenu: showLeftMenu\n      });\n\n      _this.triggerResize();\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"showShortcut\", function () {\n      ShowGlobalModal({\n        children: React.createElement(ShortcutHelp, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }),\n        title: '键盘快捷键说明',\n        width: 640\n      });\n    });\n\n    var pageComponents = props.pageComponents,\n        iframeMode = props.iframeMode;\n    _this.pageRoutes = iframeMode ? ['Posts'] : Object.keys(pageComponents);\n    EventEmitter.on('QUERY_MENU', function (resMenuData) {\n      _this.changeMenuData(resMenuData);\n    });\n\n    _this.initApp();\n\n    return _this;\n  }\n\n  _createClass(ScaffoldLayout, [{\n    key: \"initApp\",\n    value: function () {\n      var _initApp = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var langMapper;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.fetchLangMapper(this.state.lang);\n\n              case 2:\n                langMapper = _context3.sent;\n                this.setState({\n                  langMapper: langMapper,\n                  ready: true\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function initApp() {\n        return _initApp.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"geti18nUrl\",\n    value: function geti18nUrl(lang) {\n      return i18nMapperUrl + lang + '.json';\n    }\n  }, {\n    key: \"triggerResize\",\n    value: function triggerResize() {\n      setTimeout(function () {\n        var evt = window.document.createEvent('UIEvents');\n        evt.initUIEvent('resize', true, false, window, 0);\n        window.dispatchEvent(evt);\n      }, 50);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Mousetrap.bind(['alt alt'], function (e) {\n        _this2.toggleLeftMenu(!_this2.state.showLeftMenu);\n\n        return false;\n      });\n      Mousetrap.bind(['alt+k'], function (e) {\n        return _this2.showShortcut();\n      });\n      Mousetrap.bind(['alt+w'], function (e) {\n        return _this2.handleCloseFormShortcut();\n      });\n      this.initRoute();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Mousetrap.unbind(['alt+k', 'alt alt']);\n    }\n  }, {\n    key: \"changeMenuData\",\n    value: function changeMenuData() {\n      var menuData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      this.setState({\n        menuData: menuData\n      });\n    }\n  }, {\n    key: \"getRouteProps\",\n    value: function getRouteProps() {\n      var _this$props = this.props,\n          userInfo = _this$props.userInfo,\n          username = _this$props.username;\n      return {\n        userInfo: userInfo,\n        username: username,\n        gm: this.gm,\n        onNavigate: this.onNavigate,\n        history: this.history\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          _this$props2$username = _this$props2.username,\n          username = _this$props2$username === void 0 ? 'U' : _this$props2$username,\n          logout = _this$props2.logout,\n          pageComponents = _this$props2.pageComponents,\n          _this$props2$pluginCo = _this$props2.pluginComponent,\n          pluginComponent = _this$props2$pluginCo === void 0 ? {} : _this$props2$pluginCo,\n          menuMappers = _this$props2.menuMappers,\n          versionInfo = _this$props2.versionInfo,\n          iframeMode = _this$props2.iframeMode,\n          i18nConfig = _this$props2.i18nConfig,\n          DashBoard = _this$props2.DashBoard,\n          title = _this$props2.title;\n      var _this$state2 = this.state,\n          menuCodeMapper = _this$state2.menuCodeMapper,\n          showLeftMenu = _this$state2.showLeftMenu,\n          menuData = _this$state2.menuData,\n          activeMenu = _this$state2.activeMenu,\n          displayFloat = _this$state2.displayFloat,\n          activeRouteIdx = _this$state2.activeRouteIdx,\n          routerInfo = _this$state2.routerInfo,\n          lang = _this$state2.lang,\n          ready = _this$state2.ready,\n          routers = _this$state2.routers;\n      var Statusbar = pluginComponent.Statusbar,\n          NotfoundPage = pluginComponent.NotfoundPage;\n      var hasRouter = routers.length > 0; // console.log(hasRouter)\n\n      var container = ready ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(LeftmenuLayout, {\n        onDidMount: this.onGetMenuCodeMapper,\n        menuData: menuData,\n        title: title,\n        logout: logout,\n        onClickMenu: function onClickMenu(code) {// this.pushRoute(code)\n        },\n        i18nConfig: i18nConfig,\n        menuMappers: menuMappers,\n        username: username,\n        lang: lang,\n        defaultFlowMode: false,\n        versionInfo: versionInfo,\n        changeLang: this.changeLang,\n        showLeftMenu: showLeftMenu,\n        gm: this.gm,\n        onToggleNav: this.toggleLeftMenu,\n        activeMenu: activeMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: 'pages-container ' + (showLeftMenu ? 'show-menu' : 'hide-menu'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"status-bar\",\n        id: \"statusBar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"menu-actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"_action-btn mr10\",\n        onClick: function onClick(e) {\n          return _this3.toggleLeftMenu(!showLeftMenu);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(ToolTip, {\n        title: this.gm(showLeftMenu ? \"收起\" : \"展开\") + '菜单（快捷键：alt + alt）',\n        n: showLeftMenu ? \"angle-double-left\" : \"angle-double-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }))), Statusbar ? React.cloneElement(Statusbar, {\n        onLogout: logout,\n        showShortcut: this.showShortcut,\n        displayFloat: displayFloat,\n        gm: this.gm,\n        toggleFloat: this.toggleFloat\n      }) : null, i18nConfig ? React.createElement(\"div\", {\n        className: \"lang-selector mr10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(DropdownMenu, {\n        onChange: function onChange(val) {\n          return _this3.changeLang(val);\n        },\n        position: \"right\",\n        value: lang,\n        values: i18nConfig,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      })) : null), React.createElement(Tabs, {\n        withContent: true,\n        closeabled: hasRouter,\n        closeTip: \"\\u5FEB\\u6377\\u952E: alt + w\",\n        activeTabIdx: hasRouter ? activeRouteIdx : 0,\n        onClose: function onClose(idx) {\n          return _this3.closeTab(idx, routerInfo);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, hasRouter ? routers.map(function (route) {\n        var C = pageComponents[route];\n        var currInfo = routerInfo[route];\n        var params = currInfo.params;\n        return React.createElement(Tab, {\n          contentClass: route,\n          label: _this3.gm(menuCodeMapper[route] || route),\n          key: route + JSON.stringify(params),\n          onChange: function onChange(e) {\n            return _this3.changeRoute(route, params);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, C ? React.createElement(C, _extends({}, _this3.getRouteProps(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        })) : NotfoundPage ? React.createElement(NotfoundPage, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }) : React.createElement(Notfound, {\n          key: route + '404',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          },\n          __self: this\n        }));\n      }) : React.createElement(Tab, {\n        contentClass: \"dash-board\",\n        label: this.gm(\"仪表盘\"),\n        key: \"dash-board\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(DashBoardWrapper, {\n        CustomerComponent: DashBoard,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }))))) : null;\n      return React.createElement(\"div\", {\n        id: \"managerApp\",\n        className: \"fill\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(Loading, {\n        loading: !ready,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, container));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return ScaffoldLayout;\n}(RouterHelper);\n\n_defineProperty(ScaffoldLayout, \"setI18nUrl\", function (nextUrl) {\n  i18nMapperUrl = nextUrl;\n});\n\n_defineProperty(ScaffoldLayout, \"propTypes\", {\n  /** 用户登录后的信息，会传递给每一个页面 */\n  userInfo: PropTypes.object,\n\n  /** 用户名，用于在左菜单显示 */\n  username: PropTypes.string.isRequired,\n\n  /** 退出登录 */\n  onLogout: PropTypes.func,\n\n  /** 插件 */\n  pluginComponent: PropTypes.shape({\n    Statusbar: PropTypes.any\n  }),\n  // iframeMode: PropTypes.bool,\n\n  /** 所有的页面的 mapper 引用 */\n  pageComponents: PropTypes.object,\n  i18nConfig: PropTypes.object,\n  menuStore: PropTypes.arrayOf(PropTypes.object),\n  DashBoard: PropTypes.any\n});\n\nexport { ScaffoldLayout as default };\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(i18nMapperUrl, \"i18nMapperUrl\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/layout.js\");\n  reactHotLoader.register(ScaffoldLayout, \"ScaffoldLayout\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/layout.js\");\n  leaveModule(module);\n})();\n\n;\nScaffoldLayout.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"setI18nUrl\",\n    \"docblock\": null,\n    \"modifiers\": [\"static\"],\n    \"params\": [{\n      \"name\": \"nextUrl\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"initApp\",\n    \"docblock\": null,\n    \"modifiers\": [\"async\"],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"geti18nUrl\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"lang\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"changeLang\",\n    \"docblock\": null,\n    \"modifiers\": [\"async\"],\n    \"params\": [{\n      \"name\": \"lang\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"fetchLangMapper\",\n    \"docblock\": null,\n    \"modifiers\": [\"async\"],\n    \"params\": [{\n      \"name\": \"lang\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"gm\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"key\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"triggerResize\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"handleCloseFormShortcut\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"toggleFloat\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"changeMenuData\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"menuData\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onGetMenuCodeMapper\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"menuCodeMapper\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"toggleLeftMenu\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"showLeftMenu\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"showShortcut\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"getRouteProps\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }],\n  \"displayName\": \"ScaffoldLayout\",\n  \"props\": {\n    \"userInfo\": {\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": false,\n      \"description\": \"\\u7528\\u6237\\u767B\\u5F55\\u540E\\u7684\\u4FE1\\u606F\\uFF0C\\u4F1A\\u4F20\\u9012\\u7ED9\\u6BCF\\u4E00\\u4E2A\\u9875\\u9762\"\n    },\n    \"username\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": true,\n      \"description\": \"\\u7528\\u6237\\u540D\\uFF0C\\u7528\\u4E8E\\u5728\\u5DE6\\u83DC\\u5355\\u663E\\u793A\"\n    },\n    \"onLogout\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\\u9000\\u51FA\\u767B\\u5F55\"\n    },\n    \"pluginComponent\": {\n      \"type\": {\n        \"name\": \"shape\",\n        \"value\": {\n          \"Statusbar\": {\n            \"name\": \"any\",\n            \"required\": false\n          }\n        }\n      },\n      \"required\": false,\n      \"description\": \"\\u63D2\\u4EF6\"\n    },\n    \"pageComponents\": {\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": false,\n      \"description\": \"\\u6240\\u6709\\u7684\\u9875\\u9762\\u7684 mapper \\u5F15\\u7528\"\n    },\n    \"i18nConfig\": {\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"menuStore\": {\n      \"type\": {\n        \"name\": \"arrayOf\",\n        \"value\": {\n          \"name\": \"object\"\n        }\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"DashBoard\": {\n      \"type\": {\n        \"name\": \"any\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/layout.js"],"names":["React","Component","PropTypes","ShowGlobalModal","Icon","Tabs","Tab","DropdownMenu","ToolTip","Loading","setUkelliConfig","setUkeLang","Mousetrap","ToggleBasicFloatLen","EventEmitter","ShortcutHelp","LeftmenuLayout","Notfound","RouterHelper","DashBoardWrapper","i18nMapperUrl","ScaffoldLayout","props","state","menuCodeMapper","showLeftMenu","activeMenu","displayFloat","menuData","menuStore","lang","navigator","language","ready","langMapper","fetchLangMapper","setState","url","geti18nUrl","fetch","json","mapper","getKeyMap","gm","console","log","key","keyMapper","activeRouteIdx","routerInfo","closeTab","isDisplay","window","MenuCodeMapper","triggerResize","children","title","width","pageComponents","iframeMode","pageRoutes","Object","keys","on","resMenuData","changeMenuData","initApp","setTimeout","evt","document","createEvent","initUIEvent","dispatchEvent","bind","e","toggleLeftMenu","showShortcut","handleCloseFormShortcut","initRoute","unbind","userInfo","username","onNavigate","history","logout","pluginComponent","menuMappers","versionInfo","i18nConfig","DashBoard","routers","Statusbar","NotfoundPage","hasRouter","length","container","onGetMenuCodeMapper","code","changeLang","cloneElement","onLogout","toggleFloat","val","idx","map","route","C","currInfo","params","JSON","stringify","changeRoute","getRouteProps","nextUrl","object","string","isRequired","func","shape","any","arrayOf"],"mappings":"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","sourcesContent":["/**\n * 主要布局文件, 不需要单独修改, 以后统一修改\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  ShowGlobalModal, Icon, Tabs, Tab, DropdownMenu, ToolTip,\n  Loading, setUkelliConfig, setUkeLang\n} from 'ukelli-ui';\nimport Mousetrap from 'mousetrap';\nimport { ToggleBasicFloatLen, EventEmitter } from 'basic-helper';\n\nimport ShortcutHelp from './shortcut';\nimport LeftmenuLayout from './leftmenu';\n// import Posts from './posts';\nimport Notfound from './notfound';\nimport { RouterHelper } from './router-multiple';\nimport DashBoardWrapper from './dash-board';\n\nlet i18nMapperUrl = './i18n/';\n\nexport default class ScaffoldLayout extends RouterHelper {\n  static setI18nUrl = (nextUrl) => {\n    i18nMapperUrl = nextUrl;\n  }\n  static propTypes = {\n    /** 用户登录后的信息，会传递给每一个页面 */\n    userInfo: PropTypes.object,\n    /** 用户名，用于在左菜单显示 */\n    username: PropTypes.string.isRequired,\n    /** 退出登录 */\n    onLogout: PropTypes.func,\n    /** 插件 */\n    pluginComponent: PropTypes.shape({\n      Statusbar: PropTypes.any\n    }),\n    // iframeMode: PropTypes.bool,\n    /** 所有的页面的 mapper 引用 */\n    pageComponents: PropTypes.object,\n    i18nConfig: PropTypes.object,\n    menuStore: PropTypes.arrayOf(PropTypes.object),\n    DashBoard: PropTypes.any,\n  };\n\n  state = {\n    ...this.state,\n    menuCodeMapper: {},\n    showLeftMenu: true,\n    activeMenu: '',\n    displayFloat: true,\n    menuData: this.props.menuStore || [],\n    lang: navigator.language,\n    ready: false,\n    langMapper: {}\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { pageComponents, iframeMode } = props;\n    this.pageRoutes = iframeMode ? ['Posts'] : Object.keys(pageComponents);\n    EventEmitter.on('QUERY_MENU', (resMenuData) => {\n      this.changeMenuData(resMenuData);\n    });\n    this.initApp();\n  }\n\n  async initApp() {\n    let langMapper = await this.fetchLangMapper(this.state.lang);\n    this.setState({\n      langMapper,\n      ready: true\n    });\n  }\n\n  geti18nUrl(lang) {\n    return i18nMapperUrl + lang + '.json';\n  }\n\n  changeLang = async (lang) => {\n    if(!lang) return;\n    let langMapper = await this.fetchLangMapper(lang);\n    this.setState({\n      lang,\n      langMapper\n    });\n  }\n\n  fetchLangMapper = async (lang) => {\n    let url = this.geti18nUrl(lang);\n    try {\n      let mapper = await (await fetch(url)).json();\n      setUkelliConfig({\n        getKeyMap: this.gm,\n      });\n      setUkeLang(lang);\n      return mapper;\n    } catch(e) {\n      console.log('please set the correct i18n url');\n      return {};\n    }\n    // setState && this.setState({\n    //   langMapper: mapper\n    // });\n    // 设置 UI 库的 keyMapper\n  }\n\n  gm = (key) => {\n    let keyMapper = this.state.langMapper;\n    return key === 'all' ? keyMapper : keyMapper[key] || key || '';\n  }\n\n  triggerResize() {\n    setTimeout(() => {\n      var evt = window.document.createEvent('UIEvents');\n      evt.initUIEvent('resize', true, false, window, 0);\n      window.dispatchEvent(evt);\n    }, 50);\n  }\n\n  componentDidMount() {\n    Mousetrap.bind(['alt alt'], e => {\n      this.toggleLeftMenu(!this.state.showLeftMenu);\n      return false;\n    });\n    Mousetrap.bind(['alt+k'], e => this.showShortcut());\n    Mousetrap.bind(['alt+w'], e => this.handleCloseFormShortcut());\n    this.initRoute();\n  }\n\n  componentWillUnmount() {\n    Mousetrap.unbind(['alt+k', 'alt alt']);\n  }\n\n  handleCloseFormShortcut = () => {\n    const { activeRouteIdx, routerInfo } = this.state;\n    this.closeTab(activeRouteIdx, routerInfo);\n  }\n\n  toggleFloat = () => {\n    let isDisplay = ToggleBasicFloatLen();\n    this.setState(({ displayFloat }) => ({\n      displayFloat: !displayFloat\n    }));\n  }\n\n  changeMenuData(menuData = []) {\n    this.setState({\n      menuData\n    });\n  }\n  onGetMenuCodeMapper = (menuCodeMapper) => {\n    this.setState({\n      menuCodeMapper\n    });\n    window.MenuCodeMapper = menuCodeMapper;\n  }\n  toggleLeftMenu = (showLeftMenu) => {\n    this.setState({\n      showLeftMenu\n    });\n    this.triggerResize();\n  }\n  showShortcut = () => {\n    ShowGlobalModal({\n      children: <ShortcutHelp/>,\n      title: '键盘快捷键说明',\n      width: 640\n    });\n  }\n  getRouteProps() {\n    const { userInfo, username } = this.props;\n    return {\n      userInfo,\n      username,\n      gm: this.gm,\n      onNavigate: this.onNavigate,\n      history: this.history,\n    };\n  }\n  render() {\n    const {\n      username = 'U',\n      logout,\n      pageComponents,\n      pluginComponent = {},\n      menuMappers,\n      versionInfo,\n      iframeMode,\n      i18nConfig,\n      DashBoard,\n      title\n    } = this.props;\n    const {\n      menuCodeMapper,\n      showLeftMenu,\n      menuData,\n      activeMenu,\n      displayFloat,\n      activeRouteIdx,\n      routerInfo,\n      lang,\n      ready,\n      routers\n    } = this.state;\n    const { Statusbar, NotfoundPage } = pluginComponent;\n    const hasRouter = routers.length > 0;\n    // console.log(hasRouter)\n\n    const container = ready ? (\n      <div>\n        <LeftmenuLayout\n          onDidMount={this.onGetMenuCodeMapper}\n          menuData={menuData}\n          title={title}\n          logout={logout}\n          onClickMenu={code => {\n            // this.pushRoute(code)\n          }}\n          i18nConfig={i18nConfig}\n          menuMappers={menuMappers}\n          username={username}\n          lang={lang}\n          defaultFlowMode={false}\n          versionInfo={versionInfo}\n          changeLang={this.changeLang}\n          showLeftMenu={showLeftMenu}\n          gm={this.gm}\n          onToggleNav={this.toggleLeftMenu}\n          activeMenu={activeMenu}/>\n        {/* {\n          showLeftMenu ? null : (\n            <span className=\"show-nav-btn\" onClick={e => this.toggleLeftMenu(true)}>\n              <Icon n=\"angle-right\"/>\n            </span>\n          )\n        } */}\n        <div\n          className={\n            'pages-container ' + (showLeftMenu ? 'show-menu' : 'hide-menu')\n          }>\n          <div className=\"status-bar\" id=\"statusBar\">\n            <div className=\"menu-actions\">\n              <span\n                className=\"_action-btn mr10\"\n                onClick={e => this.toggleLeftMenu(!showLeftMenu)}>\n                <ToolTip\n                  title={this.gm(showLeftMenu ? \"收起\" : \"展开\") + '菜单（快捷键：alt + alt）'}\n                  n={showLeftMenu ? \"angle-double-left\" : \"angle-double-right\"}/>\n              </span>\n            </div>\n            {\n              Statusbar ? React.cloneElement(Statusbar, {\n                onLogout: logout,\n                showShortcut: this.showShortcut,\n                displayFloat: displayFloat,\n                gm: this.gm,\n                toggleFloat: this.toggleFloat,\n              }) : null\n            }\n            {\n              i18nConfig ? (\n                <div className=\"lang-selector mr10\">\n                  <DropdownMenu \n                    onChange={val => this.changeLang(val)}\n                    position=\"right\"\n                    value={lang}\n                    values={i18nConfig}/>\n                </div>\n              ) : null\n            }\n          </div>\n          <Tabs \n            withContent \n            closeabled={hasRouter}\n            closeTip=\"快捷键: alt + w\"\n            activeTabIdx={hasRouter ? activeRouteIdx : 0}\n            onClose={idx => this.closeTab(idx, routerInfo)}>\n            {\n              hasRouter ? routers.map(route => {\n                const C = pageComponents[route];\n                const currInfo = routerInfo[route];\n                const { params } = currInfo;\n                return (\n                  <Tab \n                    contentClass={route}\n                    label={this.gm(menuCodeMapper[route] || route)} \n                    key={route + JSON.stringify(params)} \n                    onChange={e => this.changeRoute(route, params)}>\n                    {\n                      C ? (\n                        <C {...this.getRouteProps()}/>\n                      ) : NotfoundPage ? (\n                        <NotfoundPage/>\n                      ) : (\n                        <Notfound key={route + '404'}/>\n                      )\n                    }\n                  </Tab>\n                );\n              }) : (\n                <Tab\n                  contentClass=\"dash-board\"\n                  label={this.gm(\"仪表盘\")}\n                  key=\"dash-board\">\n                  <DashBoardWrapper CustomerComponent={DashBoard}/>\n                </Tab>\n              )\n            }\n          </Tabs>\n        </div>\n      </div>\n    ) : null;\n\n    return (\n      <div id=\"managerApp\" className=\"fill\">\n        <Loading loading={!ready}>\n          {container}\n        </Loading>\n      </div>\n    );\n  }\n}\n"]}]}