{"remainingRequest":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[[\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/react-hot-loader/babel.js\"],\"env\":{\"development\":{\"presets\":[\"@babel/env\",\"@babel/preset-react\"],\"plugins\":[[\"react-hot-loader/babel\"],\"@babel/plugin-proposal-class-properties\"]},\"production\":{\"presets\":[\"@babel/preset-env\",\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-proposal-class-properties\"]}},\"babelrc\":false,\"cacheDirectory\":true,\"cacheCompression\":false,\"compact\":false}!/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js","dependencies":[{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js","mtime":1543390634434},{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/cache-loader/dist/cjs.js","mtime":1541998094606},{"path":"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/node_modules/babel-loader/lib/index.js","mtime":1541048071011}],"contextDependencies":[],"result":["var _jsxFileName = \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { DebounceClass, Call } from 'basic-helper';\nimport { ToolTip, Icon, Avatar } from 'ukelli-ui';\nimport { storageHelper } from '../config';\nimport { Link } from '../router-multiple';\nimport SearchBox from './search';\nimport VersionComponent from './version-com';\nvar delayExec = new DebounceClass();\nvar MENU_ACTIVE_STORAGE = 'MENU_ACTIVE_STORAGE';\n\nfunction getScreenHeight() {\n  return document.documentElement.clientHeight;\n}\n\nfunction getElementLeft(element) {\n  if (!element) return;\n  var actualLeft = element.offsetLeft;\n  var current = element.offsetParent;\n\n  while (current !== null) {\n    actualLeft += current.offsetLeft + current.clientLeft;\n    current = current.offsetParent;\n  }\n\n  return actualLeft;\n}\n\nfunction getElementTop(element) {\n  if (!element) return;\n  var actualTop = element.offsetTop;\n  var current = element.offsetParent;\n\n  while (current !== null) {\n    actualTop += current.offsetTop + current.clientTop;\n    current = current.offsetParent;\n  }\n\n  return actualTop;\n}\n\nvar MENU_CODE_MAPPER = 'MENU_CODE_MAPPER';\nvar menuCodeMapper = storageHelper.get(MENU_CODE_MAPPER, true) || {};\n\nvar MenuItem = function MenuItem(_ref) {\n  var _ref$icon = _ref.icon,\n      icon = _ref$icon === void 0 ? 'angle-right' : _ref$icon,\n      title = _ref.title,\n      gm = _ref.gm;\n  return React.createElement(\"div\", {\n    className: \"layout a-i-c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    n: icon,\n    classNames: ['mr10'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, gm(title)), React.createElement(\"span\", {\n    className: \"flex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(Icon, {\n    n: \"angle-right\",\n    classNames: ['direct'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }));\n};\n\nvar ShortcutTipDesc = function ShortcutTipDesc() {\n  return React.createElement(\"div\", {\n    style: {\n      maxWidth: 240\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"\\u5FEB\\u6377\\u952E\\uFF1Aalt + s\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), \"\\u5C0F\\u8D34\\u58EB\\uFF1A\\u8F93\\u5165\\u9996\\u5B57\\u6BCD\\u5FEB\\u901F\\u67E5\\u627E; \\u6BD4\\u5982\", React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"\\u8D26\\u53F7\\u7BA1\\u7406\"), \"\\uFF08\", React.createElement(\"strong\", {\n    style: {\n      color: '#449cea'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"z\"), \"hang\", React.createElement(\"strong\", {\n    style: {\n      color: '#449cea'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"h\"), \"ao\", React.createElement(\"strong\", {\n    style: {\n      color: '#449cea'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"g\"), \"uan\", React.createElement(\"strong\", {\n    style: {\n      color: '#449cea'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"l\"), \"i\\uFF09\\uFF0C\\u8F93\\u5165\", React.createElement(\"strong\", {\n    style: {\n      color: '#449cea'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"zhgl\"), \"\\uFF08\\u6216\\u8005zhg\\uFF09\");\n};\n/**\n * 左菜单控件\n * 支持无限嵌套结构，支持“树”模式，支持“悬浮”模式\n * menuData 结构\n * {\n *   title: '',\n *   code: '',\n *   icon: '',\n *   child: [\n *     // 递归此结构, 避免和 react 的 children 冲突，故为 child\n *     {\n *       title: '',\n *       code: '',\n *       icon: '',\n *       child: []\n *     }\n *   ]\n * }\n */\n\n\nvar Leftmenu =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Leftmenu, _Component);\n\n  function Leftmenu(props) {\n    var _this;\n\n    _classCallCheck(this, Leftmenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Leftmenu).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"flowModeKey\", 'IS_FLOW_MODA');\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getNormalMenuChildren\", function (initDataList) {\n      if (!initDataList || !Array.isArray(initDataList)) return; // if(!initDataList || !Array.isArray(initDataList)) return console.error(initDataList, 'initDataList 参数错误');\n\n      var _this$props = _this.props,\n          onClickMenu = _this$props.onClickMenu,\n          gm = _this$props.gm;\n      var _this$state = _this.state,\n          showMenuMapper = _this$state.showMenuMapper,\n          flowMode = _this$state.flowMode;\n      var allSet = [];\n      var foldIdx = 0;\n\n      var recursive = function recursive(dataList) {\n        var currDOMSets = [];\n        dataList.forEach(function (item, currItemIdx) {\n          var _item = _this.getMenuItem(item);\n\n          var child = _item.child,\n              title = _item.title,\n              code = _item.code,\n              icon = _item.icon,\n              path = _item.path;\n          var key = code + title;\n\n          var to = _this.wrapLink(_item);\n\n          var hasChildren = child && child.length > 0;\n          var isFold = !code || hasChildren;\n          var currFoldIdx = foldIdx;\n          ++foldIdx;\n          var isActive = showMenuMapper.hasOwnProperty(currFoldIdx);\n          var dom = null;\n\n          if (isFold) {\n            var childDOM = null;\n\n            if (hasChildren) {\n              childDOM = recursive.call(_assertThisInitialized(_assertThisInitialized(_this)), child);\n            }\n\n            dom = React.createElement(\"div\", {\n              key: foldIdx,\n              className: 'fold fold-' + currFoldIdx + (flowMode ? '' : isActive ? ' active' : ' hide-fold'),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 179\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"fold-title\",\n              onClick: function onClick(e) {\n                !flowMode && _this.toggleFold(e, currFoldIdx);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 186\n              },\n              __self: this\n            }, React.createElement(MenuItem, _extends({}, _item, {\n              gm: gm,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 191\n              },\n              __self: this\n            }))), React.createElement(\"div\", {\n              className: \"children\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 195\n              },\n              __self: this\n            }, childDOM));\n          } else {\n            dom = _this.getMenuLinkerDOM({\n              key: key,\n              to: to,\n              code: code,\n              icon: icon,\n              onClick: function onClick() {\n                return Call(onClickMenu, code);\n              },\n              menuText: title\n            });\n          }\n\n          currDOMSets.push(dom);\n        });\n        return currDOMSets;\n      };\n\n      allSet = recursive.call(_assertThisInitialized(_assertThisInitialized(_this)), initDataList);\n      return allSet;\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"hideFlowMenu\", function () {\n      delayExec.exec(function () {\n        _this.setFlowMenu({\n          isShow: false\n        });\n      }, 200);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getMenuLinkerDOM\", function (_ref2) {\n      var code = _ref2.code,\n          key = _ref2.key,\n          to = _ref2.to,\n          _onClick = _ref2.onClick,\n          menuText = _ref2.menuText,\n          icon = _ref2.icon;\n      var gm = _this.props.gm;\n      menuCodeMapper[code] = menuText;\n      storageHelper.set(MENU_CODE_MAPPER, menuCodeMapper, true);\n      return React.createElement(Link, {\n        key: key,\n        className: \"menu\",\n        to: to,\n        onClick: function onClick(e) {\n          return Call(_onClick, key);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, !icon ? React.createElement(\"span\", {\n        className: \"menu-tip\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"-\") : React.createElement(Icon, {\n        n: icon,\n        classNames: ['mr10'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }), gm(menuText));\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getFlowModeDOM\", function (initDataList) {\n      var flowMenuConfig = _this.state.flowMenuConfig;\n      var gm = _this.props.gm;\n      var offset = flowMenuConfig.offset,\n          _flowMenuConfig$activ = flowMenuConfig.activeItem,\n          activeItem = _flowMenuConfig$activ === void 0 ? {} : _flowMenuConfig$activ,\n          activeIdx = flowMenuConfig.activeIdx;\n      var flowMenuDOM = React.createElement(\"div\", {\n        className: \"flow-menu-container\",\n        onMouseEnter: function onMouseEnter(e) {\n          return delayExec.cancel();\n        },\n        onMouseLeave: function onMouseLeave(e) {\n          return _this.hideFlowMenu();\n        },\n        style: {\n          left: offset.left\n        },\n        ref: function ref(flowMenuContainer) {\n          if (flowMenuContainer) {\n            _this.flowMenuContainer = flowMenuContainer;\n            var flowContainerHeight = flowMenuContainer.offsetHeight;\n            var flowContainerScrollTop = _this.leftmenuDOM ? _this.leftmenuDOM.scrollTop : 0;\n            var expectedOffsetTop = offset.top - flowContainerScrollTop;\n            var parentHeight = offset.height;\n            var offsetBottom = expectedOffsetTop + flowContainerHeight;\n            var overBottom = getScreenHeight() - offsetBottom;\n            var finalOffsetTop = expectedOffsetTop;\n            var flowMenuOffsetTopPx = parentHeight == flowContainerHeight ? 0 : parentHeight;\n\n            if (overBottom < 0) {\n              /**\n               * 如果高度超过了底部\n               */\n              finalOffsetTop = expectedOffsetTop + overBottom;\n            }\n\n            flowMenuContainer.style.top = finalOffsetTop - flowMenuOffsetTopPx + 'px';\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, _this.getNormalMenuChildren(activeItem.child));\n      var allSet = initDataList.map(function (item, idx) {\n        var _item = _this.getMenuItem(item);\n\n        var child = _item.child,\n            title = _item.title,\n            code = _item.code,\n            icon = _item.icon;\n\n        var to = _this.wrapLink(_item);\n\n        var isFold = !code || child && child.length > 0;\n        var key = code + title;\n        var isHovering = activeIdx == idx;\n        return isFold ? React.createElement(\"div\", {\n          key: idx,\n          onMouseEnter: function onMouseEnter(e) {\n            delayExec.cancel();\n\n            _this.setFlowMenu({\n              targetElem: e.target,\n              activeItem: _item,\n              idx: idx\n            });\n          },\n          onMouseLeave: function onMouseLeave(e) {\n            _this.hideFlowMenu();\n          },\n          className: 'fold' + (isHovering ? ' hover' : ''),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 336\n          },\n          __self: this\n        }, React.createElement(MenuItem, _extends({}, _item, {\n          gm: gm,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 350\n          },\n          __self: this\n        }))) : _this.getMenuLinkerDOM({\n          key: key,\n          to: to,\n          icon: icon,\n          onClick: function onClick() {\n            return Call(onClickMenu, code);\n          },\n          menuText: title\n        });\n      });\n      return React.createElement(\"div\", {\n        className: \"leftmenu-tree\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, allSet, flowMenuDOM);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getMenuItem\", function (item) {\n      var menuMappers = _this.props.menuMappers;\n      var child = menuMappers.child,\n          code = menuMappers.code,\n          title = menuMappers.title,\n          icon = menuMappers.icon;\n      return _objectSpread({}, item, {\n        child: item[child],\n        code: item[code],\n        title: item[title],\n        icon: item[icon]\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"showSearch\", function () {});\n\n    var _showMenuMapper = window.Storage.getItem(MENU_ACTIVE_STORAGE) || '';\n\n    try {\n      _showMenuMapper = JSON.parse(_showMenuMapper);\n    } catch (e) {\n      _showMenuMapper = {};\n    }\n\n    var storageMode = storageHelper.get(_this.flowModeKey);\n    var _props$defaultFlowMod = props.defaultFlowMode,\n        defaultFlowMode = _props$defaultFlowMod === void 0 ? false : _props$defaultFlowMod,\n        menuData = props.menuData;\n    window.MENU_DATA = menuData;\n    _this.state = {\n      showMenuMapper: _showMenuMapper,\n      flowMenuConfig: {\n        activeItem: {},\n        activeIdx: '',\n        isShow: false,\n        offset: {\n          top: 0,\n          left: 0\n        }\n      },\n      flowMode: storageMode ? !!+storageMode : defaultFlowMode\n    };\n    return _this;\n  }\n\n  _createClass(Leftmenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Call(this.props.onDidMount, menuCodeMapper);\n    }\n  }, {\n    key: \"changeMenuUIMode\",\n    value: function changeMenuUIMode(isFlowMode) {\n      this.setState({\n        flowMode: isFlowMode\n      });\n      storageHelper.set(this.flowModeKey, isFlowMode ? '1' : '0');\n    }\n  }, {\n    key: \"toggleFold\",\n    value: function toggleFold(e, idx, isShow) {\n      e.stopPropagation();\n      var showMenuMapper = this.state.showMenuMapper;\n      var nextState = Object.assign({}, showMenuMapper);\n\n      if (typeof isShow != 'undefined') {\n        isShow ? nextState[idx] = true : delete nextState[idx];\n      } else {\n        if (nextState.hasOwnProperty(idx)) {\n          delete nextState[idx];\n        } else {\n          nextState[idx] = true;\n        }\n      }\n\n      window.Storage.setItem(MENU_ACTIVE_STORAGE, JSON.stringify(nextState));\n      this.setState({\n        showMenuMapper: nextState\n      });\n    }\n  }, {\n    key: \"setFlowMenu\",\n    value: function setFlowMenu(options) {\n      var flowMenuConfig = this.state.flowMenuConfig;\n      var targetElem = options.targetElem,\n          activeItem = options.activeItem,\n          _options$isShow = options.isShow,\n          isShow = _options$isShow === void 0 ? true : _options$isShow,\n          idx = options.idx;\n      var nextOffset = flowMenuConfig.offset;\n\n      if (targetElem) {\n        var offsetWidth = targetElem.offsetWidth,\n            offsetHeight = targetElem.offsetHeight;\n        nextOffset = {\n          top: getElementTop(targetElem),\n          left: getElementLeft(targetElem) + offsetWidth,\n          height: offsetHeight\n        };\n      }\n\n      this.setState({\n        flowMenuConfig: {\n          offset: nextOffset,\n          activeIdx: idx,\n          activeItem: activeItem,\n          isShow: isShow\n        }\n      });\n    }\n  }, {\n    key: \"wrapLink\",\n    value: function wrapLink(_ref3) {\n      var path = _ref3.path,\n          code = _ref3.code;\n      return path ? code + '?' + path : code;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          menuData = _this$props2.menuData,\n          onClickMenu = _this$props2.onClickMenu,\n          onToggleNav = _this$props2.onToggleNav,\n          versionInfo = _this$props2.versionInfo,\n          _this$props2$title = _this$props2.title,\n          title = _this$props2$title === void 0 ? 'UKE管理系统' : _this$props2$title,\n          username = _this$props2.username,\n          logout = _this$props2.logout,\n          gm = _this$props2.gm,\n          showLeftMenu = _this$props2.showLeftMenu;\n      var flowMode = this.state.flowMode;\n      var menuTree = flowMode ? this.getFlowModeDOM(menuData) : React.createElement(\"div\", {\n        className: \"leftmenu-tree\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }, this.getNormalMenuChildren(menuData));\n      var renderRes = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        ref: function ref(leftmenuDOM) {\n          if (leftmenuDOM) _this2.leftmenuDOM = leftmenuDOM;\n        },\n        style: showLeftMenu ? {} : {\n          zIndex: -1\n        },\n        className: 'leftmenu-response' + (flowMode ? ' flow-mode' : ' tree-mode'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"menu-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"mr5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }, title)), React.createElement(\"span\", {\n        className: \"flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }), React.createElement(ToolTip, {\n        position: \"bottom\",\n        title: React.createElement(ShortcutTipDesc, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 427\n          },\n          __self: this\n        }),\n        classNames: ['_action-btn mr10'],\n        className: \"p10\",\n        onClick: function onClick() {\n          return _this2._seatchBox.show();\n        },\n        n: \"search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424\n        },\n        __self: this\n      }), React.createElement(SearchBox, {\n        ref: function ref(e) {\n          return _this2._seatchBox = e;\n        },\n        onClickMenu: onClickMenu,\n        onToggleNav: onToggleNav,\n        codeMapper: menuCodeMapper,\n        showLeftMenu: showLeftMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }), React.createElement(ToolTip, {\n        position: \"bottom\",\n        title: '切换到' + (!flowMode ? '悬浮' : '传统') + '模式',\n        classNames: ['_action-btn'],\n        className: \"p10\",\n        onClick: function onClick(e) {\n          return _this2.changeMenuUIMode(!flowMode);\n        },\n        n: !flowMode ? \"align-justify\" : \"align-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"userinfo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        size: 40,\n        text: username[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450\n        },\n        __self: this\n      }, username), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451\n        },\n        __self: this\n      }, gm('在线'))), React.createElement(\"span\", {\n        className: \"flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }), logout && React.createElement(\"span\", {\n        className: \"_btn\",\n        onClick: function onClick(e) {\n          return logout();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456\n        },\n        __self: this\n      }, \"\\u9000\\u51FA\\u767B\\u5F55\")), menuTree), versionInfo ? React.createElement(VersionComponent, {\n        gm: gm,\n        versionInfo: versionInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      }) : null);\n      return renderRes;\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return Leftmenu;\n}(Component);\n\n_defineProperty(Leftmenu, \"propTypes\", {\n  onDidMount: PropTypes.func,\n  menuMappers: PropTypes.shape({\n    child: PropTypes.string.isRequired,\n    code: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    icon: PropTypes.string\n  }),\n\n  /* 是否悬浮模式的菜单模式 */\n  flowMode: PropTypes.bool,\n  gm: PropTypes.func,\n  changeLang: PropTypes.func,\n  logout: PropTypes.func,\n  lang: PropTypes.any,\n  menuData: PropTypes.any.isRequired,\n  i18nConfig: PropTypes.object,\n  onClickMenu: PropTypes.func\n});\n\nexport { Leftmenu as default };\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(delayExec, \"delayExec\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(MENU_ACTIVE_STORAGE, \"MENU_ACTIVE_STORAGE\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(getScreenHeight, \"getScreenHeight\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(getElementLeft, \"getElementLeft\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(getElementTop, \"getElementTop\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(MENU_CODE_MAPPER, \"MENU_CODE_MAPPER\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(menuCodeMapper, \"menuCodeMapper\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(MenuItem, \"MenuItem\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(ShortcutTipDesc, \"ShortcutTipDesc\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  reactHotLoader.register(Leftmenu, \"Leftmenu\", \"/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js\");\n  leaveModule(module);\n})();\n\n;\nLeftmenu.__docgenInfo = {\n  \"description\": \"\\u5DE6\\u83DC\\u5355\\u63A7\\u4EF6\\n\\u652F\\u6301\\u65E0\\u9650\\u5D4C\\u5957\\u7ED3\\u6784\\uFF0C\\u652F\\u6301\\u201C\\u6811\\u201D\\u6A21\\u5F0F\\uFF0C\\u652F\\u6301\\u201C\\u60AC\\u6D6E\\u201D\\u6A21\\u5F0F\\nmenuData \\u7ED3\\u6784\\n{\\n  title: '',\\n  code: '',\\n  icon: '',\\n  child: [\\n    // \\u9012\\u5F52\\u6B64\\u7ED3\\u6784, \\u907F\\u514D\\u548C react \\u7684 children \\u51B2\\u7A81\\uFF0C\\u6545\\u4E3A child\\n    {\\n      title: '',\\n      code: '',\\n      icon: '',\\n      child: []\\n    }\\n  ]\\n}\",\n  \"methods\": [{\n    \"name\": \"changeMenuUIMode\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"isFlowMode\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"getNormalMenuChildren\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"initDataList\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"toggleFold\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"e\",\n      \"type\": null\n    }, {\n      \"name\": \"idx\",\n      \"type\": null\n    }, {\n      \"name\": \"isShow\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"setFlowMenu\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"options\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"hideFlowMenu\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"getMenuLinkerDOM\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"{ code, key, to, onClick, menuText, icon }\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"wrapLink\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"{path, code}\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"getFlowModeDOM\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"initDataList\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"getMenuItem\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"item\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"showSearch\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }],\n  \"displayName\": \"Leftmenu\",\n  \"props\": {\n    \"onDidMount\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"menuMappers\": {\n      \"type\": {\n        \"name\": \"shape\",\n        \"value\": {\n          \"child\": {\n            \"name\": \"string\",\n            \"required\": true\n          },\n          \"code\": {\n            \"name\": \"string\",\n            \"required\": true\n          },\n          \"title\": {\n            \"name\": \"string\",\n            \"required\": true\n          },\n          \"icon\": {\n            \"name\": \"string\",\n            \"required\": false\n          }\n        }\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"flowMode\": {\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"gm\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"changeLang\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"logout\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"lang\": {\n      \"type\": {\n        \"name\": \"any\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"menuData\": {\n      \"type\": {\n        \"name\": \"any\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"i18nConfig\": {\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"onClickMenu\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/AlexZhang/work/uke/uke-admin-web-scaffold/src/leftmenu/leftmenu.js"],"names":["React","Component","PropTypes","DebounceClass","Call","ToolTip","Icon","Avatar","storageHelper","Link","SearchBox","VersionComponent","delayExec","MENU_ACTIVE_STORAGE","getScreenHeight","document","documentElement","clientHeight","getElementLeft","element","actualLeft","offsetLeft","current","offsetParent","clientLeft","getElementTop","actualTop","offsetTop","clientTop","MENU_CODE_MAPPER","menuCodeMapper","get","MenuItem","icon","title","gm","ShortcutTipDesc","maxWidth","color","Leftmenu","props","initDataList","Array","isArray","onClickMenu","state","showMenuMapper","flowMode","allSet","foldIdx","recursive","dataList","currDOMSets","forEach","item","currItemIdx","_item","getMenuItem","child","code","path","key","to","wrapLink","hasChildren","length","isFold","currFoldIdx","isActive","hasOwnProperty","dom","childDOM","call","e","toggleFold","getMenuLinkerDOM","onClick","menuText","push","exec","setFlowMenu","isShow","set","flowMenuConfig","offset","activeItem","activeIdx","flowMenuDOM","cancel","hideFlowMenu","left","flowMenuContainer","flowContainerHeight","offsetHeight","flowContainerScrollTop","leftmenuDOM","scrollTop","expectedOffsetTop","top","parentHeight","height","offsetBottom","overBottom","finalOffsetTop","flowMenuOffsetTopPx","style","getNormalMenuChildren","map","idx","isHovering","targetElem","target","menuMappers","window","Storage","getItem","JSON","parse","storageMode","flowModeKey","defaultFlowMode","menuData","MENU_DATA","onDidMount","isFlowMode","setState","stopPropagation","nextState","Object","assign","setItem","stringify","options","nextOffset","offsetWidth","onToggleNav","versionInfo","username","logout","showLeftMenu","menuTree","getFlowModeDOM","renderRes","zIndex","_seatchBox","show","changeMenuUIMode","func","shape","string","isRequired","bool","changeLang","lang","any","i18nConfig","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { DebounceClass, Call } from 'basic-helper';\nimport { ToolTip, Icon, Avatar } from 'ukelli-ui';\n\nimport { storageHelper } from '../config';\n\nimport { Link } from '../router-multiple';\nimport SearchBox from './search';\nimport VersionComponent from './version-com';\n\nlet delayExec = new DebounceClass();\n\nconst MENU_ACTIVE_STORAGE = 'MENU_ACTIVE_STORAGE';\n\nfunction getScreenHeight() {\n  return document.documentElement.clientHeight;\n}\n\nfunction getElementLeft(element) {\n  if(!element) return;\n  var actualLeft = element.offsetLeft;\n  var current = element.offsetParent;\n  while (current !== null) {\n    actualLeft += (current.offsetLeft + current.clientLeft);\n    current = current.offsetParent;\n  }\n  return actualLeft;\n}\n\nfunction getElementTop(element) {\n  if(!element) return;\n  var actualTop = element.offsetTop;\n  var current = element.offsetParent;\n  while (current !== null) {\n    actualTop += (current.offsetTop + current.clientTop);\n    current = current.offsetParent;\n  }\n  return actualTop;\n}\n\n\nconst MENU_CODE_MAPPER = 'MENU_CODE_MAPPER';\n\nlet menuCodeMapper = storageHelper.get(MENU_CODE_MAPPER, true) || {};\n\nconst MenuItem = ({ icon = 'angle-right', title, gm }) => {\n  return (\n    <div className=\"layout a-i-c\">\n      <Icon n={icon} classNames={['mr10']}/>\n      <span>{gm(title)}</span>\n      <span className=\"flex\" />\n      <Icon n=\"angle-right\" classNames={['direct']}/>\n    </div>\n  );\n};\n\nconst ShortcutTipDesc = () => {\n  return (\n    <div style={{maxWidth: 240}}>\n      快捷键：alt + s\n      <br />\n      小贴士：输入首字母快速查找; 比如\n      <strong>账号管理</strong> \n      （<strong style={{color: '#449cea'}}>z</strong>hang<strong style={{color: '#449cea'}}>h</strong>ao\n      <strong style={{color: '#449cea'}}>g</strong>uan<strong style={{color: '#449cea'}}>l</strong>i），输入 \n      <strong style={{color: '#449cea'}}>zhgl</strong>（或者zhg）\n    </div>\n  );\n};\n\n/**\n * 左菜单控件\n * 支持无限嵌套结构，支持“树”模式，支持“悬浮”模式\n * menuData 结构\n * {\n *   title: '',\n *   code: '',\n *   icon: '',\n *   child: [\n *     // 递归此结构, 避免和 react 的 children 冲突，故为 child\n *     {\n *       title: '',\n *       code: '',\n *       icon: '',\n *       child: []\n *     }\n *   ]\n * }\n */\nexport default class Leftmenu extends Component {\n  static propTypes = {\n    onDidMount: PropTypes.func,\n    menuMappers: PropTypes.shape({\n      child: PropTypes.string.isRequired,\n      code: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      icon: PropTypes.string,\n    }),\n    /* 是否悬浮模式的菜单模式 */\n    flowMode: PropTypes.bool,\n    gm: PropTypes.func,\n    changeLang: PropTypes.func,\n    logout: PropTypes.func,\n    lang: PropTypes.any,\n    menuData: PropTypes.any.isRequired,\n    i18nConfig: PropTypes.object,\n    onClickMenu: PropTypes.func\n  };\n  flowModeKey = 'IS_FLOW_MODA';\n  constructor(props) {\n    super(props);\n    let showMenuMapper = window.Storage.getItem(MENU_ACTIVE_STORAGE) || '';\n    try {\n      showMenuMapper = JSON.parse(showMenuMapper);\n    } catch (e) {\n      showMenuMapper = {};\n    }\n    const storageMode = storageHelper.get(this.flowModeKey);\n    const { defaultFlowMode = false, menuData } = props;\n\n    window.MENU_DATA = menuData;\n\n    this.state = {\n      showMenuMapper,\n      flowMenuConfig: {\n        activeItem: {},\n        activeIdx: '',\n        isShow: false,\n        offset: {\n          top: 0,\n          left: 0\n        }\n      },\n      flowMode: storageMode ? (!!+storageMode) : defaultFlowMode\n    };\n  }\n  componentDidMount() {\n    Call(this.props.onDidMount, menuCodeMapper);\n  }\n\n  changeMenuUIMode(isFlowMode) {\n    this.setState({\n      flowMode: isFlowMode\n    });\n    storageHelper.set(this.flowModeKey, isFlowMode ? '1' : '0');\n  }\n\n  getNormalMenuChildren = initDataList => {\n    if (!initDataList || !Array.isArray(initDataList)) return;\n    // if(!initDataList || !Array.isArray(initDataList)) return console.error(initDataList, 'initDataList 参数错误');\n    const { onClickMenu, gm } = this.props;\n    const { showMenuMapper, flowMode } = this.state;\n    let allSet = [];\n    let foldIdx = 0;\n    const recursive = (dataList) => {\n      let currDOMSets = [];\n      dataList.forEach((item, currItemIdx) => {\n        let _item = this.getMenuItem(item);\n        let { child, title, code, icon, path } = _item;\n        let key = code + title;\n        let to = this.wrapLink(_item);\n\n        let hasChildren = child && child.length > 0;\n        let isFold = !code || hasChildren;\n\n        let currFoldIdx = foldIdx;\n\n        ++foldIdx;\n        let isActive = showMenuMapper.hasOwnProperty(currFoldIdx);\n        let dom = null;\n        if (isFold) {\n          let childDOM = null;\n          if (hasChildren) {\n            childDOM = recursive.call(this, child);\n          }\n          dom = (\n            <div\n              key={foldIdx}\n              className={\n                'fold fold-' +\n                currFoldIdx +\n                (flowMode ? '' : isActive ? ' active' : ' hide-fold')\n              }>\n              <div\n                className=\"fold-title\"\n                onClick={e => {\n                  !flowMode && this.toggleFold(e, currFoldIdx);\n                }}>\n                <MenuItem {..._item} gm={gm}/>\n                {/* <span className=\"caret\" />\n                {gm(title)} */}\n              </div>\n              <div className=\"children\">{childDOM}</div>\n            </div>\n          );\n        } else {\n          dom = this.getMenuLinkerDOM({\n            key: key,\n            to: to,\n            code,\n            icon,\n            onClick: () => Call(onClickMenu, code),\n            menuText: title\n          });\n        }\n        currDOMSets.push(dom);\n      });\n      return currDOMSets;\n    };\n    allSet = recursive.call(this, initDataList);\n    return allSet;\n  };\n  toggleFold(e, idx, isShow) {\n    e.stopPropagation();\n    const { showMenuMapper } = this.state;\n    let nextState = Object.assign({}, showMenuMapper);\n\n    if (typeof isShow != 'undefined') {\n      isShow ? (nextState[idx] = true) : delete nextState[idx];\n    } else {\n      if (nextState.hasOwnProperty(idx)) {\n        delete nextState[idx];\n      } else {\n        nextState[idx] = true;\n      }\n    }\n\n    window.Storage.setItem(MENU_ACTIVE_STORAGE, JSON.stringify(nextState));\n    this.setState({\n      showMenuMapper: nextState\n    });\n  }\n  setFlowMenu(options) {\n    const { flowMenuConfig } = this.state;\n    const { targetElem, activeItem, isShow = true, idx } = options;\n    let nextOffset = flowMenuConfig.offset;\n\n    if (targetElem) {\n      let { offsetWidth, offsetHeight } = targetElem;\n      nextOffset = {\n        top: getElementTop(targetElem),\n        left: getElementLeft(targetElem) + offsetWidth,\n        height: offsetHeight\n      };\n    }\n    this.setState({\n      flowMenuConfig: {\n        offset: nextOffset,\n        activeIdx: idx,\n        activeItem,\n        isShow\n      }\n    });\n  }\n  hideFlowMenu = () => {\n    delayExec.exec(() => {\n      this.setFlowMenu({\n        isShow: false\n      });\n    }, 200);\n  }\n  getMenuLinkerDOM = ({ code, key, to, onClick, menuText, icon }) => {\n    const {gm} = this.props;\n    menuCodeMapper[code] = menuText;\n    storageHelper.set(MENU_CODE_MAPPER, menuCodeMapper, true);\n    return (\n      <Link\n        key={key}\n        className=\"menu\"\n        to={to}\n        onClick={e => Call(onClick, key)}>\n        {\n          !icon ? (\n            <span className=\"menu-tip\">-</span>\n          ) : (\n            <Icon n={icon} classNames={['mr10']}/>\n          )\n        }\n        {gm(menuText)}\n      </Link>\n    );\n  };\n  wrapLink({path, code}) {\n    return path ? code + '?' + path : code;\n  }\n  getFlowModeDOM = initDataList => {\n    const { flowMenuConfig } = this.state;\n    const { gm } = this.props;\n    const { offset, activeItem = {}, activeIdx } = flowMenuConfig;\n\n    const flowMenuDOM = (\n      <div\n        className=\"flow-menu-container\"\n        onMouseEnter={e => delayExec.cancel()}\n        onMouseLeave={e => this.hideFlowMenu()}\n        style={{\n          left: offset.left\n        }}\n        ref={flowMenuContainer => {\n          if (flowMenuContainer) {\n            this.flowMenuContainer = flowMenuContainer;\n\n            let flowContainerHeight = flowMenuContainer.offsetHeight;\n            let flowContainerScrollTop = this.leftmenuDOM ? this.leftmenuDOM.scrollTop : 0;\n            let expectedOffsetTop = offset.top - flowContainerScrollTop;\n            let parentHeight = offset.height;\n            let offsetBottom = expectedOffsetTop + flowContainerHeight;\n\n            let overBottom = getScreenHeight() - offsetBottom;\n            let finalOffsetTop = expectedOffsetTop;\n            let flowMenuOffsetTopPx = parentHeight == flowContainerHeight ? 0 : parentHeight;\n\n            if (overBottom < 0) {\n              /**\n               * 如果高度超过了底部\n               */\n              finalOffsetTop = expectedOffsetTop + overBottom;\n            }\n            flowMenuContainer.style.top = (finalOffsetTop - flowMenuOffsetTopPx) + 'px';\n          }\n        }}>\n        {this.getNormalMenuChildren(activeItem.child)}\n      </div>\n    );\n\n    const allSet = initDataList.map((item, idx) => {\n      let _item = this.getMenuItem(item);\n      let { child, title, code, icon } = _item;\n      let to = this.wrapLink(_item);\n      let isFold = !code || (child && child.length > 0);\n      let key = code + title;\n      let isHovering = activeIdx == idx;\n      return isFold ? (\n        <div\n          key={idx}\n          onMouseEnter={e => {\n            delayExec.cancel();\n            this.setFlowMenu({\n              targetElem: e.target,\n              activeItem: _item,\n              idx\n            });\n          }}\n          onMouseLeave={e => {\n            this.hideFlowMenu();\n          }}\n          className={'fold' + (isHovering ? ' hover' : '')}>\n          <MenuItem {..._item} gm={gm}/>\n          {/* <span className=\"caret\" />\n          {gm(title)} */}\n        </div>\n      ) : (\n        this.getMenuLinkerDOM({\n          key: key,\n          to: to,\n          icon: icon,\n          onClick: () => Call(onClickMenu, code),\n          menuText: title\n        })\n      );\n    });\n\n    return (\n      <div className=\"leftmenu-tree\">\n        {allSet}\n        {flowMenuDOM}\n      </div>\n    );\n  };\n  getMenuItem = (item) => {\n    const { menuMappers } = this.props;\n    const { child, code, title, icon } = menuMappers;\n    return {\n      ...item,\n      child: item[child],\n      code: item[code],\n      title: item[title],\n      icon: item[icon],\n    };\n  }\n  showSearch = () => {\n\n  }\n  render() {\n    const {\n      menuData,\n      onClickMenu,\n      onToggleNav,\n      versionInfo,\n      title = 'UKE管理系统',\n      username,\n      logout,\n      gm,\n      showLeftMenu\n    } = this.props;\n\n    const { flowMode } = this.state;\n\n    const menuTree = flowMode ? (\n      this.getFlowModeDOM(menuData)\n    ) : (\n      <div className=\"leftmenu-tree\">\n        {this.getNormalMenuChildren(menuData)}\n      </div>\n    );\n\n    const renderRes = (\n      <div>\n        <div\n          ref={leftmenuDOM => {\n            if(leftmenuDOM) this.leftmenuDOM = leftmenuDOM;\n          }}\n          style={showLeftMenu ? {} : {zIndex: -1}}\n          className={\n            'leftmenu-response' + (flowMode ? ' flow-mode' : ' tree-mode')\n          }>\n          <div className=\"menu-header\">\n            <h5 className=\"title\">\n              <span className=\"mr5\">{title}</span>\n            </h5>\n            <span className=\"flex\" />\n            <ToolTip \n              position=\"bottom\"\n              title={(\n                <ShortcutTipDesc />\n              )}\n              classNames={['_action-btn mr10']}\n              className=\"p10\"\n              onClick={() => this._seatchBox.show()}\n              n=\"search\"/>\n            <SearchBox\n              ref={e => this._seatchBox = e}\n              onClickMenu={onClickMenu}\n              onToggleNav={onToggleNav}\n              codeMapper={menuCodeMapper}\n              showLeftMenu={showLeftMenu}/>\n            <ToolTip \n              position=\"bottom\"\n              title={'切换到' + (!flowMode ? '悬浮' : '传统') + '模式'}\n              classNames={['_action-btn']}\n              className=\"p10\"\n              onClick={e => this.changeMenuUIMode(!flowMode)}\n              n={!flowMode ? \"align-justify\" : \"align-left\"}/>\n          </div>\n          <div className=\"userinfo\">\n            <Avatar size={40} text={username[0]}/>\n            <span>\n              <div>{username}</div>\n              <div>{gm('在线')}</div>\n            </span>\n            <span className=\"flex\" />\n            {\n              logout && (\n                <span className=\"_btn\" onClick={e => logout()}>退出登录</span>\n              )\n            }\n          </div>\n          {menuTree}\n        </div>\n        {\n          versionInfo ? (\n            <VersionComponent gm={gm} versionInfo={versionInfo} />\n          ) : null\n        }\n      </div>\n    );\n\n    return renderRes;\n  }\n}\n"]}]}