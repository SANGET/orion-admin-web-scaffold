---
name: 模版引擎
route: /Template-engin
# order: -1
# sidebar: true
---

# 模版引擎

> 高阶模版、模版引擎哲学：大而全，可配置，忽略 HTML 的存在吧

import { Playground, PropsTable } from 'docz'
import { FormRender, ReportTemplate, GeneralReportRender } from './';

## 表格渲染模版

> Props of ReportTemplate

<PropsTable of={ReportTemplate} />

> ReportTemplate 为聚合组件，使用 Ukelli UI 的表格渲染机制，管理着一个通用表格的生命周期，保证 UI 的稳定性、一致性以及程序的可维护性

### 表格生命周期

```markdown
1. 获取表格查询条件
    - 同步获取，直接渲染
    - 异步获取，管理异步的获取状态
2. 用户对查询条件的操作
3. 触发查询操作
    - 根据查询条件筛选
    - 分页操作，需要保存上一个查询条件
4. 发起请求
    - 对应的 loading 操作
    - 对应 loading 状态的 UI 封装
5. 请求回应
    - 数据渲染, 使用 Ukelli-UI 的 Table 和 CardTable
6. 数据交互结束
```

<Playground style={{
  height: 600
}}>
  {
    () => {
      const mockData = [
        {
          username: 'Leon',
          skill: 'kill',
          career: 'killer'
        }
      ];
      const keyMapper = [
        {
          key: 'username',
          title: '用户名'
        },
        {
          key: 'skill',
          title: '技能'
        },
        {
          key: 'career',
          title: '职业'
        },
      ]
      return (
        <ReportTemplate
          querying={false}
          keyMapper={keyMapper}
          records={mockData} />
      )
    }
  }
</Playground>

## 高阶模版

> 灵活集成任意 Action, 其中封装了对是否表单条件加载中 loading 状态的管理

### 表单高阶模版

```js
import { FormRender } from 'uke-admin-web-scaffold'

class DemoPage extends React.Component {
  formOptions = [{
    type: 'input',
    ref: 'input',
    title: '实例输入框'
  }]
  state = {
    loading: false,
  },
  btnConfig = [{
    text: '提交',
    action: () => {}
  }]
}

const FormTMPL = FormRender(DemoPage);

<FormTMPL />
```
